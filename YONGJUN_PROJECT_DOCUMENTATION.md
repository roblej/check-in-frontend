# ğŸ¨ í˜¸í…” ìƒì„¸ ëª¨ë‹¬/íŒ¨ë„ ê¸°ëŠ¥ ë¬¸ì„œ

> **ë‹´ë‹¹ì**: yongjun
> **ì‘ì—… ë²”ìœ„**: í˜¸í…” ìƒì„¸ ì •ë³´ í‘œì‹œ (ëª¨ë‹¬/íŒ¨ë„ í˜•íƒœ)

---

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ hotel/
â”‚   â”‚   â”œâ”€â”€ HotelDetail.js           # í˜¸í…” ìƒì„¸ ì •ë³´ ë©”ì¸ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ HotelDetailPanel.js      # íŒ¨ë„ ë˜í¼ ì»´í¬ë„ŒíŠ¸ (ë„¤ì´ë²„ ìŠ¤íƒ€ì¼)
â”‚   â”‚   â”œâ”€â”€ HotelGallery.js          # ì´ë¯¸ì§€ ê°¤ëŸ¬ë¦¬
â”‚   â”‚   â”œâ”€â”€ HotelInfo.js             # í˜¸í…” ê¸°ë³¸ ì •ë³´
â”‚   â”‚   â”œâ”€â”€ HotelAmenities.js        # í¸ì˜ì‹œì„¤
â”‚   â”‚   â”œâ”€â”€ HotelReviews.js          # ë¦¬ë·°
â”‚   â”‚   â”œâ”€â”€ HotelLocation.js         # ìœ„ì¹˜ ì •ë³´
â”‚   â”‚   â”œâ”€â”€ HotelPolicy.js           # ì´ìš© ì •ì±…
â”‚   â”‚   â”œâ”€â”€ RoomCard.js              # ê°ì‹¤ ì¹´ë“œ (ì˜ˆì•½ ë²„íŠ¼)
â”‚   â”‚   â”œâ”€â”€ LiveViewerCount.js       # ì‹¤ì‹œê°„ ì¡°íšŒìˆ˜ (20ì´ˆë§ˆë‹¤ ê°±ì‹ )
â”‚   â”‚   â”œâ”€â”€ mockHotelData.js         # ì„ì‹œ ë°ì´í„° (API ì—°ë™ ì „)
â”‚   â”‚   â””â”€â”€ index.js                 # Export í†µí•©
â”‚   â””â”€â”€ payment/
â”‚       â”œâ”€â”€ TossPaymentsWidget.js    # í† ìŠ¤í˜ì´ë¨¼ì¸  SDK í†µí•©
â”‚       â”œâ”€â”€ CashPointSection.js      # ìºì‹œ/í¬ì¸íŠ¸ ì…ë ¥ UI
â”‚       â””â”€â”€ PaymentSummary.js        # ê²°ì œ ìš”ì•½ ë° ë²„íŠ¼
â”‚
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ reservation/
â”‚   â”‚   â””â”€â”€ page.js                  # ì˜ˆì•½ ê²°ì œ í˜ì´ì§€ (ë©”ì¸)
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â””â”€â”€ payments/
â”‚   â”‚       â””â”€â”€ route.js            # ê²°ì œ API í”„ë¡ì‹œ
â”‚   â”œâ”€â”€ hotel-search/
â”‚   â”‚   â””â”€â”€ page.js                  # í˜¸í…” ê²€ìƒ‰ ê²°ê³¼ í˜ì´ì§€ (íŒ¨ë„ ì‚¬ìš©)
â”‚   â””â”€â”€ hotel/
â”‚       â””â”€â”€ [id]/
â”‚           â””â”€â”€ page.js              # í˜¸í…” ìƒì„¸ ì „ì²´ í˜ì´ì§€
â”‚
â””â”€â”€ stores/
    â””â”€â”€ paymentStore.js              # ê²°ì œ ì •ë³´ ìŠ¤í† ì–´ (Zustand)

```

---

## ğŸ¯ ì£¼ìš” ê¸°ëŠ¥

### 1ï¸âƒ£ í˜¸í…” ì˜ˆì•½ ê²°ì œ ì‹œìŠ¤í…œ

#### **ì˜ˆì•½ íë¦„**

```
1. RoomCardì—ì„œ "ì˜ˆì•½í•˜ê¸°" ë²„íŠ¼ í´ë¦­
   â†“
2. paymentDraft ìƒì„± (Zustand ìŠ¤í† ì–´ ì €ì¥)
   - orderId, contentId, roomIdx, roomName
   - checkIn, checkOut, guests, nights
   - roomPrice, totalPrice
   â†“
3. /reservation í˜ì´ì§€ë¡œ ì´ë™
   â†“
4. ì‚¬ìš©ì ì •ë³´ ìë™ ì±„ìš°ê¸° (/api/customer/me)
   â†“
5. ìºì‹œ/í¬ì¸íŠ¸ ì…ë ¥ (ì„ íƒ)
   â†“
6. TossPayments ìœ„ì ¯ ë Œë”ë§
   â†“
7. "ê²°ì œí•˜ê¸°" ë²„íŠ¼ í´ë¦­
   â†“
8. ë°±ì—”ë“œë¡œ ê²°ì œ ê²€ì¦ ìš”ì²­
   â†“
9. DB ì €ì¥ (íŠ¸ëœì­ì…˜ ë³´ì¥)
   â†“
10. ì´ë©”ì¼ ë°œì†¡ (QR ì½”ë“œ í¬í•¨)
```

#### **ì£¼ìš” ê¸°ëŠ¥**

- âœ… **ë¡œê·¸ì¸ í•„ìˆ˜**: ë¯¸ë¡œê·¸ì¸ ì‹œ `/login`ìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
- âœ… **ì‚¬ìš©ì ì •ë³´ ìë™ ì±„ìš°ê¸°**: nickname, email, phone ìë™ ì…ë ¥
- âœ… **ìºì‹œ/í¬ì¸íŠ¸ ì‚¬ìš©**: ë¶€ë¶„ ê²°ì œ ì§€ì›
- âœ… **ì‹¤ì‹œê°„ ì¡°íšŒìˆ˜**: 20ì´ˆë§ˆë‹¤ ìë™ ê°±ì‹ 
- âœ… **TossPayments í†µí•©**: ê²°ì œ SDK í†µí•©
- âœ… **ê²°ì œ ê²€ì¦**: í”„ë¡ íŠ¸ì—”ë“œ â†’ Next.js API â†’ Spring Boot
- âœ… **íŠ¸ëœì­ì…˜ ë³´ì¥**: ë¡¤ë°± ì§€ì›

### 2ï¸âƒ£ í˜¸í…” ìƒì„¸ ì •ë³´ í‘œì‹œ (2ê°€ì§€ ëª¨ë“œ)

### 3ï¸âƒ£ ê²€ìƒ‰ ì¡°ê±´ ê´€ë¦¬ ë° ë³€ê²½

#### **ê²€ìƒ‰ ì¡°ê±´ í‘œì‹œ**

- í˜¸í…” ì´ë¦„ ë°‘ì— í˜„ì¬ ê²€ìƒ‰ ì¡°ê±´ í‘œì‹œ
- ì²´í¬ì¸/ì²´í¬ì•„ì›ƒ ë‚ ì§œ, ìˆ™ë°• ì¼ìˆ˜, ì¸ì› ì •ë³´
- ì²« ë²ˆì§¸ ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼ì˜ ì»´íŒ©íŠ¸í•œ UI
- í´ë¦­ ì‹œ ê²€ìƒ‰ ì¡°ê±´ ë³€ê²½ ëª¨ë‹¬ ì—´ê¸°

#### **ê²€ìƒ‰ ì¡°ê±´ ë³€ê²½ ëª¨ë‹¬**

- ë‘ ë²ˆì§¸ ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼ì˜ ëª¨ë‹¬ UI
- ì²´í¬ì¸/ì²´í¬ì•„ì›ƒ ë‚ ì§œ ì„ íƒê¸°
- ì¸ì› ìˆ˜ ì¡°ì ˆ (+/- ë²„íŠ¼)
- ì ìš© ë²„íŠ¼ìœ¼ë¡œ ë³€ê²½ì‚¬í•­ ì €ì¥
- Zustand ìŠ¤í† ì–´ì™€ ì—°ë™í•˜ì—¬ ì „ì—­ ìƒíƒœ ê´€ë¦¬

#### **íŒ¨ë„ ëª¨ë“œ** (`isModal={true}`)

- **ìœ„ì¹˜**: `src/app/hotel-search/page.js`
- **ì‚¬ìš© ì»´í¬ë„ŒíŠ¸**: `HotelDetailPanel`
- **íŠ¹ì§•**:
  - í˜¸í…” ë¦¬ìŠ¤íŠ¸ ì˜¤ë¥¸ìª½ì— 555px í­ì˜ íŒ¨ë„ë¡œ í‘œì‹œ
  - ë°°ê²½ ì˜¤ë²„ë ˆì´ ì—†ìŒ (PCì—ì„œë§Œ, ëª¨ë°”ì¼ì€ ìˆìŒ)
  - í˜¸í…” ë¦¬ìŠ¤íŠ¸ì™€ ì§€ë„ê°€ ê·¸ëŒ€ë¡œ ë³´ì„
  - ë‹¤ë¥¸ í˜¸í…” í´ë¦­ ê°€ëŠ¥
  - ESC í‚¤ë¡œ ë‹«ê¸° ê°€ëŠ¥

#### **ì „ì²´ í˜ì´ì§€ ëª¨ë“œ** (`isModal={false}`)

- **ìœ„ì¹˜**: `src/app/hotel/[contentId]/page.js`
- **ì‚¬ìš© ì»´í¬ë„ŒíŠ¸**: `HotelDetail` (ì§ì ‘)
- **íŠ¹ì§•**:
  - ì „ì²´ í˜ì´ì§€ë¡œ í˜¸í…” ì •ë³´ í‘œì‹œ
  - Header, Footer í¬í•¨
  - SEO ìµœì í™” (ë©”íƒ€ë°ì´í„°, êµ¬ì¡°í™”ëœ ë°ì´í„°)
  - URL: `/hotel/[í˜¸í…”ID]`

---

## ğŸ§© ì»´í¬ë„ŒíŠ¸ ìƒì„¸

### ğŸ“„ HotelDetail.js (ë©”ì¸ ì»´í¬ë„ŒíŠ¸)

**ì—­í• **: í˜¸í…” ìƒì„¸ ì •ë³´ ì „ì²´ UI ë° ë¡œì§ ê´€ë¦¬

**ì£¼ìš” ê¸°ëŠ¥**:

1. **Sticky í—¤ë”**

   - í˜¸í…”ëª…, ë³„ì , ê°€ê²© ì •ë³´ í‘œì‹œ
   - ìŠ¤í¬ë¡¤ ì‹œ í•­ìƒ ìƒë‹¨ì— ê³ ì •
   - íŒ¨ë„: íŒ¨ë„ ìƒë‹¨ì— ê³ ì •
   - ì „ì²´ í˜ì´ì§€: ë©”ì¸ Header ë°”ë¡œ ì•„ë˜ ê³ ì •

2. **Sticky ë„¤ë¹„ê²Œì´ì…˜**

   - ì„¹ì…˜ ëª©ë¡: ê°ì‹¤, í¸ì˜ì‹œì„¤, ë¦¬ë·°, ìœ„ì¹˜, ì •ì±…
   - í—¤ë” ë°”ë¡œ ì•„ë˜ì— ë™ì ìœ¼ë¡œ ê³ ì •
   - í˜„ì¬ ë³´ì´ëŠ” ì„¹ì…˜ ìë™ í•˜ì´ë¼ì´íŠ¸
   - í´ë¦­ ì‹œ í•´ë‹¹ ì„¹ì…˜ìœ¼ë¡œ ìŠ¤í¬ë¡¤

3. **ì„¹ì…˜ ê´€ë¦¬**

   - `sectionsRef`ë¡œ ê° ì„¹ì…˜ ìœ„ì¹˜ ì¶”ì 
   - ìŠ¤í¬ë¡¤ ê°ì§€ â†’ í˜„ì¬ ì„¹ì…˜ ì—…ë°ì´íŠ¸
   - requestAnimationFrameìœ¼ë¡œ ì„±ëŠ¥ ìµœì í™”

4. **ë™ì  ë†’ì´ ê³„ì‚°**
   - í—¤ë” ë†’ì´ ìë™ ì¸¡ì • (`headerHeight` state)
   - íŒ¨ë„: HotelDetail í—¤ë”ë§Œ
   - ì „ì²´ í˜ì´ì§€: ë©”ì¸ Header + HotelDetail í—¤ë”
   - ë¦¬ì‚¬ì´ì¦ˆ ëŒ€ì‘

**Props**:

```javascript
{
  contentId : number|string,        // í˜¸í…” ID
  searchParams: Object,          // ê²€ìƒ‰ ì¡°ê±´ (ì²´í¬ì¸/ì•„ì›ƒ, ì¸ì› ë“±)
  isModal: boolean,              // íŒ¨ë„ ëª¨ë“œ ì—¬ë¶€
  scrollContainerRef: RefObject  // ì™¸ë¶€ ìŠ¤í¬ë¡¤ ì»¨í…Œì´ë„ˆ (íŒ¨ë„ìš©)
}
```

**ì£¼ìš” State**:

- `activeSection`: í˜„ì¬ í™œì„± ì„¹ì…˜
- `isScrollingToSection`: ì„¹ì…˜ í´ë¦­ ìŠ¤í¬ë¡¤ ì¤‘ ì—¬ë¶€
- `headerHeight`: ë™ì ìœ¼ë¡œ ì¸¡ì •ëœ í—¤ë” ë†’ì´

---

### ğŸ“„ HotelDetailPanel.js

**ì—­í• **: ë„¤ì´ë²„ í˜¸í…” ìŠ¤íƒ€ì¼ íŒ¨ë„ ë˜í¼

**ì£¼ìš” ê¸°ëŠ¥**:

1. ESC í‚¤ë¡œ íŒ¨ë„ ë‹«ê¸°
2. ë°°ê²½ ì˜¤ë²„ë ˆì´ (ëª¨ë°”ì¼ë§Œ)
3. ìŠ¬ë¼ì´ë“œ ì¸ ì• ë‹ˆë©”ì´ì…˜
4. íŒ¨ë„ ë‚´ ìŠ¤í¬ë¡¤ ê´€ë¦¬

**ë ˆì´ì•„ì›ƒ**:

```
PC:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ë¦¬ìŠ¤íŠ¸   â”‚   íŒ¨ë„     â”‚   ì§€ë„    â”‚
â”‚ (30%)   â”‚ (555px)   â”‚ (ë‚˜ë¨¸ì§€)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ëª¨ë°”ì¼:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì „ì²´ í™”ë©´    â”‚
â”‚ íŒ¨ë„ (100%) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**CSS í´ë˜ìŠ¤**:

- `lg:left-[calc(30%+1rem)]` - ë¦¬ìŠ¤íŠ¸ ë°”ë¡œ ì˜¤ë¥¸ìª½
- `lg:w-[555px]` - ê³ ì • í­
- `lg:top-[120px]` - ìƒë‹¨ ì—¬ë°±
- `lg:h-[calc(100vh-140px)]` - í•˜ë‹¨ ì—¬ë°±
- `lg:rounded-xl` - ë‘¥ê·¼ ëª¨ì„œë¦¬

---

### ğŸ“„ ì„œë¸Œ ì»´í¬ë„ŒíŠ¸ë“¤

#### HotelGallery.js

- í˜¸í…” ì´ë¯¸ì§€ ê°¤ëŸ¬ë¦¬ (ë©”ì¸ + ì„œë¸Œ ì´ë¯¸ì§€)
- 2x2 ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ
- í˜¸ë²„ íš¨ê³¼, ì´ë¯¸ì§€ ê°œìˆ˜ í‘œì‹œ

#### HotelInfo.js

- í˜¸í…” ê¸°ë³¸ ì •ë³´ (ì„¤ëª…, ì²´í¬ì¸/ì•„ì›ƒ ì‹œê°„, ë³„ì )
- ê¹”ë”í•œ ì¹´ë“œ í˜•íƒœ

#### HotelAmenities.js

- í¸ì˜ì‹œì„¤ ëª©ë¡
- 3ì»¬ëŸ¼ ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ
- ì²´í¬ë§ˆí¬ ì•„ì´ì½˜

#### HotelReviews.js

- ê³ ê° ë¦¬ë·° ëª©ë¡
- í‰ì , ì‘ì„±ì, ë‚ ì§œ, ê°ì‹¤ íƒ€ì… í‘œì‹œ
- í˜¸ë²„ íš¨ê³¼

#### HotelLocation.js

- í˜¸í…” ì£¼ì†Œ ë° ì§€ë„ ì˜ì—­
- TODO: ë„¤ì´ë²„/ì¹´ì¹´ì˜¤ ì§€ë„ API ì—°ë™

#### HotelPolicy.js

- ì²´í¬ì¸/ì•„ì›ƒ, ì·¨ì†Œ, ì•„ë™, ë°˜ë ¤ë™ë¬¼ ì •ì±…
- ì„¹ì…˜ë³„ë¡œ ì •ë¦¬ëœ ë ˆì´ì•„ì›ƒ

#### RoomCard.js

- ê°ì‹¤ ì •ë³´ ì¹´ë“œ
- ê°€ê²©, í• ì¸ìœ¨, í¸ì˜ì‹œì„¤, ì˜ˆì•½ ë²„íŠ¼
- í˜¸ë²„ ì‹œ í™•ëŒ€ íš¨ê³¼

#### LiveViewerCount.js

- ì‹¤ì‹œê°„ ì¡°íšŒìˆ˜ í‘œì‹œ
- WebSocket ì—°ë™ ì¤€ë¹„ (í˜„ì¬ ëœë¤)
- ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼

#### SearchConditionModal (HotelDetail.js ë‚´ë¶€)

- ê²€ìƒ‰ ì¡°ê±´ ë³€ê²½ ëª¨ë‹¬ ì»´í¬ë„ŒíŠ¸
- ì²´í¬ì¸/ì²´í¬ì•„ì›ƒ ë‚ ì§œ ì„ íƒ
- ì¸ì› ìˆ˜ ì¡°ì ˆ ê¸°ëŠ¥ (+/- ë²„íŠ¼)
- Zustand ìŠ¤í† ì–´ì™€ ì—°ë™í•˜ì—¬ ì „ì—­ ìƒíƒœ ê´€ë¦¬
- SearchCondition ì»´í¬ë„ŒíŠ¸ ì¬ì‚¬ìš©

#### mockHotelData.js

- ê°œë°œìš© ì„ì‹œ ë°ì´í„°
- ì‹¤ì œ API ì—°ë™ ì „ê¹Œì§€ ì‚¬ìš©
- TODO: API ì—°ë™ í›„ ì œê±° ì˜ˆì •

---

## ğŸ¨ ìŠ¤íƒ€ì¼ë§

### Sticky ë™ì‘ ì›ë¦¬

```javascript
// 1. í—¤ë” ë†’ì´ ë™ì  ì¸¡ì •
const [headerHeight, setHeaderHeight] = useState(0);

useEffect(() => {
  const updateHeaderHeight = () => {
    let totalHeight = headerRef.current.offsetHeight;

    // ì „ì²´ í˜ì´ì§€: ë©”ì¸ Header ë†’ì´ ì¶”ê°€
    if (!isModal) {
      const mainHeader = document.querySelector("header");
      if (mainHeader) {
        totalHeight += mainHeader.offsetHeight;
      }
    }

    setHeaderHeight(totalHeight);
  };

  updateHeaderHeight();
  window.addEventListener("resize", updateHeaderHeight);
}, [isModal]);

// 2. ë„¤ë¹„ê²Œì´ì…˜ì„ ì¸¡ì •ëœ ë†’ì´ë§Œí¼ ì•„ë˜ì— ê³ ì •
<div style={{ top: `${headerHeight}px` }} className="sticky">
  {/* ë„¤ë¹„ê²Œì´ì…˜ */}
</div>;
```

### ì„¹ì…˜ ê°ì§€ ë¡œì§

```javascript
// 1. ê° ì„¹ì…˜ì˜ ìœ„ì¹˜ ì¶”ì 
const sectionsRef = useRef({});
<div ref={(el) => sectionsRef.current['rooms'] = el}>

// 2. ìŠ¤í¬ë¡¤ ì‹œ í˜„ì¬ ì„¹ì…˜ ê³„ì‚°
const scrollY = isModal ? scrollElement.scrollTop : window.scrollY;
const threshold = headerHeight + navHeight + 10;

Object.entries(sectionsRef.current).forEach(([key, element]) => {
  const distance = Math.abs(scrollY + threshold - element.offsetTop);
  if (distance < closestDistance) {
    currentSection = key;
  }
});

setActiveSection(currentSection);
```

### ë°˜ì‘í˜• ë””ìì¸

```css
/* íŒ¨ë„ */
.lg:left-[calc(30%+1rem)]  /* ë¦¬ìŠ¤íŠ¸ ì˜¤ë¥¸ìª½ */
.lg:w-[555px]              /* ê³ ì • í­ */
.lg:top-[120px]            /* ìƒë‹¨ ì—¬ë°± */
.lg:rounded-xl             /* ë‘¥ê·¼ ëª¨ì„œë¦¬ */

/* ì „ì²´ í™”ë©´ (ëª¨ë°”ì¼) */
.w-full
.h-full
```

---

## ğŸ”„ ë°ì´í„° íë¦„

### í˜¸í…” ìƒì„¸ ì •ë³´ í‘œì‹œ íë¦„

```
1. í˜¸í…” í´ë¦­
   â†“
2. hotel-search/page.js
   - setSelectedcontentId (contentId)
   â†“
3. HotelDetailPanel ë Œë”ë§
   - contentId, searchParams ì „ë‹¬
   â†“
4. HotelDetail ë Œë”ë§
   - hotelAPI.getHotelDetail(contentId) í˜¸ì¶œ
   - hotelAPI.getHotelRooms(contentId, searchParams) í˜¸ì¶œ
   - ì„¹ì…˜ë³„ ì»´í¬ë„ŒíŠ¸ ë Œë”ë§
   â†“
5. ì‚¬ìš©ì ì¸í„°ë™ì…˜
   - ë„¤ë¹„ê²Œì´ì…˜ í´ë¦­ â†’ ì„¹ì…˜ ìŠ¤í¬ë¡¤
   - ìŠ¤í¬ë¡¤ â†’ í˜„ì¬ ì„¹ì…˜ ì—…ë°ì´íŠ¸
   - ESC/X ë²„íŠ¼ â†’ íŒ¨ë„ ë‹«ê¸°
```

### ê²€ìƒ‰ ì¡°ê±´ ê´€ë¦¬ íë¦„

```
1. ë©”ì¸ í˜ì´ì§€ (HeroSection)
   - ê²€ìƒ‰ í¼ì—ì„œ ì…ë ¥
   - updateSearchParams() â†’ Zustand ìŠ¤í† ì–´ ì €ì¥
   - router.push() â†’ hotel-search í˜ì´ì§€ ì´ë™
   â†“
2. hotel-search/page.js
   - URL íŒŒë¼ë¯¸í„° â†’ Zustand ìŠ¤í† ì–´ ì €ì¥
   - HotelDetailPanelì— searchParams ì „ë‹¬
   â†“
3. HotelDetail
   - ê²€ìƒ‰ ì¡°ê±´ í‘œì‹œ (í´ë¦­ ê°€ëŠ¥í•œ ë°•ìŠ¤)
   - í´ë¦­ ì‹œ SearchConditionModal ì—´ê¸°
   â†“
4. SearchConditionModal
   - ë‚ ì§œ, ì¸ì› ìˆ˜ì •
   - "ì ìš©" í´ë¦­ â†’ updateSearchParams()
   - Zustand ìŠ¤í† ì–´ ì—…ë°ì´íŠ¸
   â†“
5. ìë™ ì¬ë Œë”ë§
   - ëª¨ë“  ì»´í¬ë„ŒíŠ¸ê°€ ìƒˆë¡œìš´ ê²€ìƒ‰ ì¡°ê±´ ë°˜ì˜
   - ê°ì‹¤ ê°€ê²© ìë™ ì¬ê³„ì‚° (ìˆ™ë°• ì¼ìˆ˜ ë°˜ì˜)
```

---

## ğŸš€ í–¥í›„ ê°œì„  ì‚¬í•­

### ë‹¨ê¸° (1-2ì£¼)

- [ ] ì‹¤ì œ API ì—°ë™ (mockHotelData.js ì œê±°)
- [ ] ì§€ë„ API ì—°ë™ (ë„¤ì´ë²„/ì¹´ì¹´ì˜¤)
- [ ] ì´ë¯¸ì§€ ê°¤ëŸ¬ë¦¬ ìŠ¬ë¼ì´ë” êµ¬í˜„
- [ ] ì‹¤ì‹œê°„ ì¡°íšŒìˆ˜ WebSocket ì—°ë™
- [ ] ì˜ˆì•½ ë²„íŠ¼ ê¸°ëŠ¥ êµ¬í˜„

### ì¤‘ê¸° (1ê°œì›”)

- [ ] ì´ë¯¸ì§€ ë ˆì´ì§€ ë¡œë”©
- [ ] ë¦¬ë·° í˜ì´ì§€ë„¤ì´ì…˜
- [ ] ê°ì‹¤ ìƒì„¸ ëª¨ë‹¬
- [ ] ì¦ê²¨ì°¾ê¸° ê¸°ëŠ¥
- [ ] ê³µìœ í•˜ê¸° ê¸°ëŠ¥

### ì¥ê¸° (2ê°œì›”+)

- [ ] 360ë„ VR íˆ¬ì–´
- [ ] AI ì±—ë´‡ ë¬¸ì˜
- [ ] ë‹¤êµ­ì–´ ì§€ì›
- [ ] ì ‘ê·¼ì„± ê°œì„  (WCAG 2.1)

---

## ğŸ› ì•Œë ¤ì§„ ì´ìŠˆ

### í•´ê²°ë¨ âœ…

- ~~íŒ¨ë„ì´ ì „ì²´ í™”ë©´ì„ ë®ëŠ” ë¬¸ì œ~~ â†’ ë°°ê²½ ì˜¤ë²„ë ˆì´ PCì—ì„œ ì œê±°
- ~~ë„¤ë¹„ê²Œì´ì…˜ì´ ì›¹í˜ì´ì§€ ìƒë‹¨ìœ¼ë¡œ ì˜¬ë¼ê°€ëŠ” ë¬¸ì œ~~ â†’ sticky ìˆ˜ì •
- ~~í—¤ë”/ë„¤ë¹„ê²Œì´ì…˜ ì˜ë¦¼ ë¬¸ì œ~~ â†’ ë™ì  ë†’ì´ ê³„ì‚° ì¶”ê°€
- ~~ê¹œë°•ì„ ë¬¸ì œ~~ â†’ requestAnimationFrame ì‚¬ìš©
- ~~Zustand ìŠ¤í† ì–´ ê°’ì´ íƒ­ ë³€ê²½ ì‹œ ì‚¬ë¼ì§€ëŠ” ë¬¸ì œ~~ â†’ ì¡°ê±´ë¶€ ì´ˆê¸°í™” ì ìš©
- ~~ê²€ìƒ‰ ì¡°ê±´ ë³€ê²½ ê¸°ëŠ¥ ì—†ìŒ~~ â†’ SearchConditionModal êµ¬í˜„
- ~~ê°€ê²©ì´ ìˆ™ë°• ì¼ìˆ˜ë¥¼ ë°˜ì˜í•˜ì§€ ì•ŠìŒ~~ â†’ ìë™ ê³„ì‚° ë¡œì§ ì¶”ê°€

### ì§„í–‰ ì¤‘ ğŸ”„

- ì—†ìŒ

### ì¶”í›„ ìˆ˜ì • ì˜ˆì • ğŸ“

- ì´ë¯¸ì§€ placeholder ì‹¤ì œ ì´ë¯¸ì§€ë¡œ êµì²´
- ë¦¬ë·° ë”ë³´ê¸° ê¸°ëŠ¥
- ëª¨ë°”ì¼ ìµœì í™”

---

## ğŸ› íŠ¸ëŸ¬ë¸” ìŠˆíŒ… (í˜¸í…” ì˜ˆì•½ ê²°ì œ ì‹œìŠ¤í…œ)

### 1ï¸âƒ£ TossPayments ë¬´í•œ ë¡œë”©

**ë¬¸ì œ**: ê²°ì œ ì·¨ì†Œ í›„ ì¬ì‹œë„ ì‹œ ìœ„ì ¯ì´ ë¬´í•œ ë¡œë”©

**ì›ì¸**:

- `useEffect`ê°€ ì—¬ëŸ¬ ë²ˆ ì‹¤í–‰ë˜ë©° SDK ìŠ¤í¬ë¦½íŠ¸ê°€ ì¤‘ë³µ ë¡œë“œ
- `window.tossPaymentHandler`ê°€ ì¬ë“±ë¡ë˜ì§€ ì•ŠìŒ

**í•´ê²°**:

```javascript
// 1. SDK ë¡œë“œ ìƒíƒœ ì²´í¬
useEffect(() => {
  if (typeof window !== "undefined" && window.TossPayments) {
    setScriptLoaded(true);
    return;
  }
  // ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ...
}, []);

// 2. ë‹¨ì¼ useEffectë¡œ í†µí•©
useEffect(() => {
  if (!scriptLoaded) return;

  const widget = window.TossPayments(clientKey);
  const handler = widget.requestPayment.bind(widget);
  window.tossPaymentHandler = handler;
}, [scriptLoaded]);

// 3. key propìœ¼ë¡œ ê°•ì œ ë¦¬ë§ˆìš´íŠ¸ ë°©ì§€
<TossPaymentsWidget key={paymentKeys.orderId} />;
```

**êµí›ˆ**: ì™¸ë¶€ SDKëŠ” ë¡œë“œ ìƒíƒœ ì¶”ì  í•„ìˆ˜, ì˜ì¡´ì„± ë°°ì—´ ìµœì†Œí™”

---

### 2ï¸âƒ£ paymentKey undefined ì˜¤ë¥˜

**ë¬¸ì œ**: `Cannot read properties of undefined (reading 'paymentKey')`

**ì›ì¸**: ê²°ì œ ì·¨ì†Œ ì‹œ `paymentResult`ê°€ `undefined`ì¸ë° ì ‘ê·¼ ì‹œë„

**í•´ê²°**:

```javascript
if (!paymentResult?.paymentKey) {
  throw new Error("ê²°ì œ ì‘ë‹µì— paymentKeyê°€ ì—†ìŠµë‹ˆë‹¤.");
}
```

**êµí›ˆ**: Optional chainingê³¼ ëª…ì‹œì  ê²€ì¦ í•„ìˆ˜

---

### 3ï¸âƒ£ ì™¸ë˜í‚¤ ì œì•½ì¡°ê±´ ì˜¤ë¥˜

**ë¬¸ì œ**: `Cannot add or update a child row: foreign key constraint fails`

**ì›ì¸**:

- `Room` ì—”í‹°í‹°ëŠ” ë³µí•©í‚¤ ì‚¬ìš© (`roomIdx` + `contentId`)
- í”„ë¡ íŠ¸ì—”ë“œì—ì„œ `roomIdx` ì „ë‹¬ ëˆ„ë½

**í•´ê²°**:

1. `RoomCard.js`: `paymentDraft` ìƒì„± ì‹œ `roomIdx` ì¶”ê°€
2. `reservation/page.js`: `hotelInfo`ì— `roomIdx` ì „ë‹¬
3. `TossPaymentsWidget.js`: ë°±ì—”ë“œë¡œ `roomIdx` ì „ë‹¬

**êµí›ˆ**: ë³µí•©í‚¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ì—”í‹°í‹°ëŠ” ëª¨ë“  í‚¤ë¥¼ ê²€ì¦í•´ì•¼ í•¨

---

### 4ï¸âƒ£ JSON íŒŒì‹± ì˜¤ë¥˜

**ë¬¸ì œ**: `Cannot deserialize value of type java.lang.Integer from String`

**ì›ì¸**: íƒ€ì… ë¶ˆì¼ì¹˜ - `contentId`ëŠ” Stringì¸ë° Integerë¡œ íŒŒì‹± ì‹œë„

**í•´ê²°**:

```javascript
contentId: String(hotelInfo?.contentId || ""),     // String íƒ€ì…
roomId: parseInt(hotelInfo?.roomIdx || hotelInfo?.roomId), // Integer íƒ€ì…
```

**êµí›ˆ**: ë°±ì—”ë“œ DTO íƒ€ì…ì„ ì •í™•íˆ íŒŒì•…í•˜ê³  ëª…ì‹œì  íƒ€ì… ë³€í™˜

---

## ğŸ“Š ì„±ëŠ¥ ìµœì í™”

### ì ìš©ëœ ìµœì í™”

1. **requestAnimationFrame**: ìŠ¤í¬ë¡¤ ì´ë²¤íŠ¸ ìµœì í™”
2. **passive: true**: ìŠ¤í¬ë¡¤ ë¦¬ìŠ¤ë„ˆ ì„±ëŠ¥ í–¥ìƒ
3. **ì»´í¬ë„ŒíŠ¸ ë¶„ë¦¬**: ì½”ë“œ ìŠ¤í”Œë¦¬íŒ… ê°€ëŠ¥
4. **useRef**: ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ ë°©ì§€

### ì¸¡ì • ì§€í‘œ (ëª©í‘œ)

- FCP (First Contentful Paint): < 1.5s
- LCP (Largest Contentful Paint): < 2.5s
- CLS (Cumulative Layout Shift): < 0.1
- TTI (Time to Interactive): < 3.5s

---

## ğŸ” ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

1. **XSS ë°©ì§€**: Reactì˜ ê¸°ë³¸ ì´ìŠ¤ì¼€ì´í•‘ ì‚¬ìš©
2. **CSRF ë°©ì§€**: API ì—°ë™ ì‹œ í† í° í•„ìš”
3. **ë¯¼ê° ì •ë³´**: ê°€ê²©/ì˜ˆì•½ ì •ë³´ëŠ” ì„œë²„ì—ì„œ ê²€ì¦
4. **Rate Limiting**: ì¡°íšŒìˆ˜ API ê³¼ë„í•œ ìš”ì²­ ë°©ì§€

---

## ğŸ“– ì°¸ê³  ìë£Œ

- [ë„¤ì´ë²„ í˜¸í…”](https://hotels.naver.com/) - UI/UX ì°¸ê³ 
- [Next.js ê³µì‹ ë¬¸ì„œ](https://nextjs.org/docs)
- [Tailwind CSS](https://tailwindcss.com/docs)
- [í”„ë¡œì íŠ¸ ê·œì¹™](/.cursor/rules/yongjun-hotel.mdc)

---

## ğŸ‘¥ í˜‘ì—… ê·œì¹™

### âš ï¸ ì ˆëŒ€ í•˜ì§€ ë§ ê²ƒ

- âŒ `junhyeong`ì˜ ê²€ìƒ‰/í•„í„°/ë¦¬ìŠ¤íŠ¸ ì½”ë“œ ìˆ˜ì •
- âŒ ê³µí†µ ë°ì´í„° êµ¬ì¡° ë³€ê²½
- âŒ ë‹¤ë¥¸ íŒ€ì›ì˜ í•¨ìˆ˜ëª…/ë³€ìˆ˜ëª… ë³€ê²½
- âŒ ë‹¤ë¥¸ íŒ€ì›ì˜ ì£¼ì„/TODO ì‚­ì œ

### âœ… í•´ì•¼ í•  ê²ƒ

- âœ… ìì‹ ì˜ ëª¨ë‹¬/íŒ¨ë„ ê¸°ëŠ¥ë§Œ ê°œì„ 
- âœ… ê³µí†µ ì¸ìŠ¤í„´ìŠ¤(axios, zustand) ì°¸ì¡°ë§Œ
- âœ… API í˜¸ì¶œ ì‹œ try-catch í•„ìˆ˜
- âœ… ì˜¤ë¥˜ ë°œìƒ ì‹œ UI í”¼ë“œë°± (alert/toast)
- âœ… JSDoc ì£¼ì„ ì‘ì„±
- âœ… 300ì¤„ ì´ìƒ ì‹œ ì»´í¬ë„ŒíŠ¸ ë¶„ë¦¬

### ğŸ“ ì½”ë“œ ë¦¬ë·° ìš”ì²­ ì‹œ

1. ìì‹ ì˜ ì˜ì—­ë§Œ ë³€ê²½í–ˆëŠ”ì§€ í™•ì¸
2. ë¦°íŠ¸ ì—ëŸ¬ ì—†ëŠ”ì§€ í™•ì¸
3. ë‹¤ë¥¸ ê¸°ëŠ¥ì— ì˜í–¥ ì—†ëŠ”ì§€ í…ŒìŠ¤íŠ¸
4. ë³€ê²½ ì‚¬í•­ ëª…í™•íˆ ê¸°ë¡

---

## ğŸ“ ë¬¸ì˜

- **ë‹´ë‹¹ì**: yongjun
- **ì˜ì—­**: í˜¸í…” ìƒì„¸ ëª¨ë‹¬/íŒ¨ë„
- **ì¶©ëŒ ì‹œ**: PR/ì½”ë©˜íŠ¸ë¡œ ì „ë‹¬

---

## ğŸ“ ìµœê·¼ ì—…ë°ì´íŠ¸ (2025-10-21)

### ìƒˆë¡œìš´ ê¸°ëŠ¥

1. **ê²€ìƒ‰ ì¡°ê±´ ê´€ë¦¬ ì‹œìŠ¤í…œ**

   - í˜¸í…” ìƒì„¸ì°½ì— ê²€ìƒ‰ ì¡°ê±´ í‘œì‹œ UI ì¶”ê°€
   - í´ë¦­ ê°€ëŠ¥í•œ ê²€ìƒ‰ ì¡°ê±´ ë°•ìŠ¤ (ì²« ë²ˆì§¸ ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼)
   - ê²€ìƒ‰ ì¡°ê±´ ë³€ê²½ ëª¨ë‹¬ êµ¬í˜„ (ë‘ ë²ˆì§¸ ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼)

2. **Zustand ìŠ¤í† ì–´ í†µí•©**

   - ì „ì—­ ìƒíƒœ ê´€ë¦¬ë¡œ ê²€ìƒ‰ ì¡°ê±´ ìœ ì§€
   - íƒ­ ë³€ê²½ ì‹œì—ë„ ê²€ìƒ‰ ì¡°ê±´ ìœ ì§€
   - í˜ì´ì§€ ê°„ ì´ë™ ì‹œ ê²€ìƒ‰ ì¡°ê±´ ì§€ì†

3. **ê°€ê²© ê³„ì‚° ë¡œì§**

   - ìˆ™ë°• ì¼ìˆ˜ì— ë”°ë¥¸ ìë™ ê°€ê²© ê³„ì‚°
   - 1ë°• ê°€ê²© Ã— ìˆ™ë°• ì¼ìˆ˜ = ì´ ê°€ê²©
   - ëª¨ë“  ê°ì‹¤ ì¹´ë“œì— ì¼ê´€ëœ ê°€ê²© í‘œì‹œ

4. **ì‚¬ìš©ì ê²½í—˜ ê°œì„ **
   - ë©”ì¸ í˜ì´ì§€ì—ì„œ ê²€ìƒ‰ ì¡°ê±´ ìë™ ë³µì›
   - í˜¸í…” ìƒì„¸ì°½ì—ì„œ ì§ì ‘ ê²€ìƒ‰ ì¡°ê±´ ë³€ê²½ ê°€ëŠ¥
   - ì‹¤ì‹œê°„ìœ¼ë¡œ ë³€ê²½ì‚¬í•­ ë°˜ì˜

---

_Last Updated: 2025-10-21_
